# 决策 006：和弦性质切换控制逻辑优化

## 状态
提议阶段

## 日期
2024-03-26

## 背景
当前应用使用Ctrl/Shift/Alt组合键来切换不同的和弦性质。这种设计可能不够直观，且操作不够便捷。需要优化键盘控制逻辑，使其更加用户友好。

## 决策
将对和弦性质切换的控制逻辑进行如下修改：

1. 保留现有功能：
   - Shift键：继续用于切换大小和弦（保持不变）

2. 新增数字键控制：
   - 数字键1：切换sus4和弦
     - 首次按下：所有和弦切换为sus4
     - 再次按下：恢复为原始三和弦
   - 数字键2：切换sus2和弦
     - 首次按下：所有和弦切换为sus2
     - 再次按下：恢复为原始三和弦
   - 其他数字键可用于后续扩展其他和弦类型

3. 移除的功能：
   - Ctrl键控制
   - Alt键控制

## 技术实现要点
1. 需要修改键盘事件监听逻辑
2. 引入和弦状态管理机制，记录当前激活的和弦类型
3. 实现和弦类型切换的切换/还原逻辑
4. 更新UI反馈，确保用户知道当前处于哪种和弦状态

## 优势
1. 操作更加直观，数字键的使用更符合用户习惯
2. 切换/还原机制更加清晰
3. 为后续扩展其他和弦类型预留了空间
4. 减少了组合键的使用，降低了操作复杂度

## 劣势
1. 需要用户重新学习操作方式
2. 可能需要添加新的UI元素来显示当前和弦状态

## 替代方案
1. 保持现有的Ctrl/Shift/Alt控制方式
2. 使用其他键位组合
3. 使用UI按钮点击方式

## 影响
1. 用户体验
   - 需要更新用户文档
   - 可能需要添加简单的教程或提示
2. 代码架构
   - 需要重构键盘事件处理逻辑
   - 需要添加和弦状态管理机制
3. 测试
   - 需要更新现有的测试用例
   - 添加新的测试场景

## 风险
1. 用户可能需要一定时间适应新的操作方式
2. 在实现过程中可能发现现有代码结构需要较大改动

## 后续行动
1. 详细设计键盘事件处理逻辑
2. 规划UI反馈机制
3. 制定具体的实现计划
4. 更新用户文档
5. 设计新的测试用例 