# 自动和弦在线Web程序 - 主控制文档

## 项目概述
- 项目名称：auto_chord
- 开始日期：2024-03-21
- 当前状态：开发中

## 项目状态
- 状态：开发阶段
- 开始日期：已开始
- 当前阶段：基础功能实现
- 预计完成日期：待定

## 主要功能
1. 通过单个按键播放基本和弦（如Q播放C和弦）
2. 通过按键组合强制特定和弦性质（如Shift+按键播放大三和弦）
3. 友好的用户界面，显示当前播放的和弦
4. 高质量音频输出
5. 响应式设计，适应不同设备
6. 调性转换功能，支持不同调性的和弦演奏

## 技术栈
- 前端：HTML5, CSS3, TypeScript
- 框架：Vue 3
- 状态管理：Pinia
- 音频处理：Tone.js
- 构建工具：Vite

## 里程碑追踪
### 当前里程碑
- 名称：初始开发阶段
- 状态：进行中
- 计划完成日期：待定

### 已完成里程碑
- ✅ 完成需求分析和任务规划
- ✅ 设计用户界面和交互流程
- ✅ 实现基本按键和和弦映射功能
- ✅ 实现音频生成和播放功能
- ✅ 完成用户界面开发
- 🔄 测试和优化
- 📝 发布第一个可用版本

## 当前任务
- 修复键盘交互问题
- 完善和弦显示功能
- 优化音频生成算法
- 添加更多和弦类型支持
- 增强用户体验
- 实现和弦转调功能

## 风险与挑战
- 跨浏览器兼容性问题
- 音频延迟处理
- 复杂按键组合的冲突处理
- 调性转换的音乐理论正确性

## 已解决的问题
- ✅ 键盘修饰键（Shift、Ctrl、Alt）状态实时更新
- ✅ 当前播放和弦的实时更新显示
- ✅ 阻止浏览器默认快捷键行为（如Ctrl+A全选）

## 决策记录
- 使用Vue 3作为前端框架
- 使用Tone.js处理Web音频
- 采用键盘布局映射而非MIDI接口

## 最后更新
- 日期：2024-03-21
- 更新人：System
- 更新内容：初始化主控制文档

## 当前活动任务
- [已完成] 移动端适配优化 (决策004)
  - UI/UX改进
  - 和弦性质展示优化
  - 设备类型检测实现
- [进行中] 和弦转调功能实现 (决策005)
  - 调性选择功能
  - 快捷调性变更
  - 和弦级数标记

## 最近决策
- [决策005] 和弦转调功能实现
  - 状态：待实现
  - 优先级：中高
  - 开始日期：2025-05-05
  - 完成日期：待定
- [决策004] 移动端适配 - 和弦展示与交互优化
  - 状态：已实现
  - 优先级：高
  - 开始日期：2024-03-26
  - 完成日期：2024-04-02

## 待办事项
1. 实现设备类型检测功能
2. 更新UI组件，移除直接的修饰键状态展示
3. 添加和弦性质展示组件
4. 重构按键状态管理逻辑
5. 进行跨平台兼容性测试
6. 设计和实现调性选择器UI
7. 开发调性转换算法
8. 实现和弦与级数映射关系
9. 测试不同调性下的功能

## 项目里程碑
- [ ] 移动端适配优化完成
  - [ ] UI组件更新
  - [ ] 交互逻辑优化
  - [ ] 跨平台测试通过
  - [ ] 用户体验评估完成
- [ ] 和弦转调功能完成
  - [ ] 调性选择器实现
  - [ ] 级数标记转换
  - [ ] 所有调性测试通过

## 风险追踪
- 现有PC用户可能需要适应新的界面展示方式
- 不同设备类型的交互体验一致性需要保证
- 性能优化需求可能增加
- 转调功能的复杂度可能超出预期

## 关键决策记录
- [DID-001] 项目初始化及基础架构搭建 